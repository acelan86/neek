#!/usr/bin/env node
var args = require('minimist')(process.argv.slice(2));
var fs = require('fs');
var Neek = require('../index');

var input = args.i || args.input;
var output = args.o || args.output;
var quiet = args.q || args.quiet;

var uniquer = new Neek({
  input: input ? fs.createReadStream(input) : process.stdin,
  output: output ? fs.createWriteStream(output) : process.stdout
});

if(args.algorithm){
  uniquer.unique(args.algorithm, handler);
} else {
  uniquer.unique(handler);
}

function handler(result){
  if(!quiet){
    var msg = '\nProcessing complete: ' + result.total + ' -> ' + result.unique;
    if(!output){
      msg = '\n' + msg + '\n';
    }
    console.log(msg);
  }
  process.exit();
}